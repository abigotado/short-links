# **Short Links Service**

## **Описание**
Сервис коротких ссылок — это консольное приложение, которое позволяет пользователям сокращать длинные URL, управлять сроком их действия и лимитом переходов. Каждый пользователь идентифицируется с помощью уникального UUID, а ссылки для разных пользователей на один и тот же ресурс всегда уникальны.

---

## **Функциональность**
1. **Создание коротких ссылок**
    - Принимает длинный URL и возвращает уникальную короткую ссылку для каждого пользователя.
    - Использует алгоритм на основе SHA-256 для генерации коротких ссылок.
    - Если пользователь уже создавал короткую ссылку для данного ресурса и она валидна - то эта ссылка будет возвращена пользователю вместо генерации новой.

2. **Уникальные ссылки для каждого пользователя**
    - Если один и тот же ресурс сокращают разные пользователи, они получают уникальные короткие ссылки.

3. **Лимит переходов**
    - Пользователь может задать максимальное количество переходов по ссылке. По умолчанию устанавливается 10 переходов. После достижения лимита ссылка становится недоступной.

4. **Срок действия ссылки**
    - Срок действия ссылки задаётся по умолчанию - 7 суток. После истечения срока действия ссылка становится недоступной.
    - Раз в сутки, а также при запуске приложения происходит удаление ссылок с истёкшим сроком.

5. **Идентификация пользователя**
    - Каждый пользователь идентифицируется уникальным UUID, который генерируется при первой генерации ссылки (в целях упрощения пользователь без ссылок не существует).
    - Пользователь может вручную ввести свой UUID для восстановления доступа к своим ссылкам (если он отказывается от ввода ID, то получает новый при генерации ссылки или перед тем как вводить короткую ссылку).
    - Пользователь может перезайти с другим ID через специальный пункт меню.

6. **Переход по короткой ссылке**
    - При вводе короткой ссылки в консоль, если она валидна, происходит автоматическое открытие оригинального URL в браузере.

7. **Удаление просроченных ссылок**
    - Ссылки, срок действия которых истёк, автоматически удаляются в фоновом режиме.

8. **Хранение данных**
    - Данные сохраняются локально в файл `links.json`.
    - В целях сохранения возможности масштабирования приложения в будущем работа с файлом и сохранением в него данных вынесена в отдельный утилитарный класс, к которому обращается репозиторий.

9. **Конфигурация**
    - Для удобства управления конфигурацией все соответствующие переменные вынесены в отдельный класс (например, дефолтное количество переходов, префикс для короткой ссылки и т.д.).
    - В отдельный класс также вынесены все строковые константы.

---

## **Установка**

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/abigotado/short-links.git
   ```

2.	Перейдите в директорию проекта:

   ```bash
   cd short-links
   ```

3.	Убедитесь, что у вас установлена Java 17 или выше.
4.	Соберите проект:
      
   ```bash
   ./gradlew build
   ```

5.	Запустите приложение:

   ```bash
   java -jar build/libs/short-links.jar
   ```

## **Инструкция по использованию**

### Главное меню

После запуска программы вы увидите меню с возможными действиями:

Добро пожаловать в сервис сокращения ссылок!

Выберите действие:
1. Создать короткую ссылку
2. Ввести короткий URL
3. Сменить пользователя (доступно только для авторизованных пользователей)
4. Выйти

### Создание короткой ссылки
1.	Выберите пункт 1.
2.	Введите длинный URL.
3.	Укажите количество переходов (или нажмите Enter для значения по умолчанию).
4.  Система предложит ввести ID пользователя или создать новый.
5.	Система создаст короткую ссылку и покажет её в консоли.

    Пример:
    
    Введите длинный URL: https://example.com
    Введите количество доступных переходов: 5
    Короткая ссылка создана: clk.ru/abc123

### Переход по короткой ссылке
1.	Выберите пункт 2.
2.  Система предложит ввести ID пользователя или создать новый.
3.	Введите короткий URL.
4.	Если ссылка действительна, откроется оригинальный ресурс в браузере. В противном случае система сообщит, что ссылка недоступна.

    Пример:
    
    Введите короткий URL: clk.ru/abc123
    Перенаправление на: https://example.com

### Смена пользователя
1.	Выберите пункт 3.
2.	Введите UUID пользователя или создайте новый.
3.	Система переключит вас на нового пользователя.

    Пример:
    
    Введите ваш UUID: 123e4567-e89b-12d3-a456-426614174000
    Ваш ID успешно найден: 123e4567-e89b-12d3-a456-426614174000

### Выход из программы
1.	Выберите пункт 4. 
2.  Программа завершит выполнение.

## Структура проекта
    org.abigotado
    ├── config                                     # Конфигурации приложения
    │   ├── AppConfig.java                         # Основные настройки
    │   └── Messages.java                          # Сообщения для вывода в консоль
    ├── exceptions                                 # Кастомные исключения
        └── LinkAlreadyExistsException.java
    ├── links                                      # Модуль для работы со ссылками
    │   ├── entity                                 # Сущности модуля
    │   │   └── Link.java                          # Модель ссылки
    │   ├── presentation
    │   │   ├── controller                         # Управление пользовательским вводом (CLI)
    │   │   │    └── LinkCliController.java
    │   │   └── MenuOptions.java                   # Пункты меню
    │   ├── repository                             # Репозиторий для хранения данных
    │   │   ├── LinkRepository.java
    │   │   └── LinkRepositoryImpl.java
    │   └── service                                # Бизнес-логика модуля
    │       └── LinkService.java
    └── utils                                      # Утилитарные классы
        ├── JsonFileHandler.java                   # Работа с JSON-файлами
        └── ShortLinkGenerator.java                # Генерация коротких ссылок 

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле [LICENSE](LICENSE).